webpackJsonp([8,9],{428:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(28),i=a(s),o=r(27),l=(a(o),r(25)),n=a(l),d=r(21),m=a(d),u=r(2),c=a(u),p=r(33);t.default={computed:(0,i.default)({},(0,p.mapGetters)(["getProj"])),data:function(){var e=this,t=function(t,r,a){return console.log(r),r?e.editForm.id?a():void m.default.get("/api/user/checkID?UserID="+r).then(function(e){return e.data.success?(console.log("验证完成!"),a()):a(new Error("工号不允许重复"))}):a(new Error("请输入工号"))};return{formInline:{user:""},editFormVisible:!1,editFormTtile:"编辑",editForm:{id:0,UserID:0,UserName:"",UserSex:1,UserAge:0,UserPhoneNum:"",UserPwd:"123456",UserEmail:"",UserCardID:""},editLoading:!1,btnEditText:"提 交",editFormRules:{UserID:[{validator:t,trigger:"blur"}],UserPwd:[{required:!0,message:"请输入密码",trigger:"blur"}],UserName:[{required:!0,message:"请输入姓名",trigger:"blur"}]},tableData:[],tableDataLength:0,listLoading:!1,currentPage:1,currentPageSize:10}},created:function(){this.getUserList()},methods:{handleAvatarSuccess:function(e,t){this.editForm.UserHeadImage=URL.createObjectURL(t.raw),this.editForm.UserHeadImage=t.response.data,console.log(this.editForm.UserHeadImage)},beforeAvatarUpload:function(){},newCustomTable:function(){this.editFormTtile="新建用户",this.editFormVisible=!0,this.editForm={id:0,UserID:0,UserName:"",UserSex:1,UserAge:0,UserPhoneNum:"",UserPwd:"123456",UserEmail:"",UserCardID:""}},handleEdit:function(e){this.editFormVisible=!0,this.editFormTtile="编辑",this.editForm.id=e._id,this.editForm.UserID=e.UserID,this.editForm.UserName=e.UserName,this.editForm.UserSex=e.UserSex,this.editForm.UserAge=e.UserAge,this.editForm.UserPhoneNum=e.UserPhoneNum,this.editForm.UserEmail=e.UserEmail,this.editForm.UserCardID=e.UserCardID},editSubmit:function(){var e=this;e.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0,n.default.start(),e.btnEditText="提交中";var t=e.editForm.id?"/api/user/"+e.editForm.id:"/api/user";m.default.post(t,e.editForm).then(function(t){t.data.success?(e.$message({message:"提交成功",type:"success"}),e.editFormVisible=!1,e.getUserList()):e.$message({message:"提交失败",type:"error"}),e.btnEditText="提 交",e.editLoading=!1,n.default.done()})})})},formatSex:function(e,t){return 1==e.UserSex?"男":0==e.UserSex?"女":"未知"},formatDate:function(e,t){return(0,c.default)(e.UserBirth).format("YYYY-MM-DD")},handleDel:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){t.listLoading=!0,n.default.start(),m.default.delete("/api/user/"+e._id).then(function(e){e.data.success?(t.$message({message:"删除成功",type:"success"}),t.listLoading=!1,n.default.done(),t.getUserList()):t.$message({message:"删除失败",type:"error"})})}).catch(function(){})},handleAdd:function(){this.editFormVisible=!0,this.editFormTtile="新增",this.editForm.UserID=0,this.editForm.UserName="",this.editForm.UserSex=0,this.editForm.UserAge=0,this.editForm.UserBirth="",this.editForm.UserAddr="",this.editForm.UserPhoneNum="",this.editForm.UserEmail="",this.editForm.UserCardID=""},getUserList:function(){var e=this,t={limit:e.$data.currentPageSize,page:e.$data.currentPage};m.default.get("/api/user",{params:t}).then(function(t){e.$data.tableData=t.data.data,e.$data.tableDataLength=t.data.meta.count,console.log(t.data.data)})},handleSizeChange:function(e){this.$data.currentPageSize=e,this.getUserList()},handleCurrentChange:function(e){this.$data.currentPage=e,this.getUserList()}}}},770:function(e,t,r){var a=r(!function(){var e=new Error('Cannot find module "!!../../../../node_modules/_css-loader@0.25.0@css-loader/index.js?sourceMap!../../../../node_modules/_vue-loader@10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-072255ae&scoped=true!../../../../node_modules/_sass-loader@4.1.1@sass-loader/index.js?sourceMap!../../../../node_modules/_vue-loader@10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./UserManager.vue"');throw e.code="MODULE_NOT_FOUND",e}());"string"==typeof a&&(a=[[e.id,a,""]]);r(31)(a,{});a.locals&&(e.exports=a.locals)},794:function(e,t,r){r(770);var a=r(19)(r(428),r(803),"data-v-072255ae",null);e.exports=a.exports},803:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-tabs",{staticStyle:{width:"100%"}},[r("el-tab-pane",{attrs:{label:"用户管理"}},[r("section",[r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"姓名"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:e.getUserList}},[e._v("查询")]),e._v(" "),r("el-button",{attrs:{type:"primary",round:""},on:{click:e.newCustomTable}},[e._v("新增用户")])],1)],1)],1),e._v(" "),[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%",height:"100%"},attrs:{border:"",fit:"",stripe:"",data:e.tableData,"highlight-current-row":""}},[r("el-table-column",{attrs:{type:"index",label:"编号",width:"85"}}),e._v(" "),r("el-table-column",{attrs:{prop:"UserID",label:"账号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"UserName",label:"姓名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"UserSex",label:"性别",formatter:e.formatSex}}),e._v(" "),r("el-table-column",{attrs:{prop:"UserAge",label:"年龄"}}),e._v(" "),r("el-table-column",{attrs:{prop:"UserCardID",label:"身份证"}}),e._v(" "),r("el-table-column",{attrs:{prop:"UserEmail",label:"邮箱"}}),e._v(" "),r("el-table-column",{attrs:{prop:"UserPhoneNum",label:"手机号"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.handleDel(t.row)}}},[e._v("删除")])]}}])})],1)],e._v(" "),r("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"10px"},attrs:{span:24}},[r("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.currentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableDataLength},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:e.editFormTtile,"close-on-click-modal":!0},model:{value:e.editFormVisible,callback:function(t){e.editFormVisible=t},expression:"editFormVisible"}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"账号",prop:"UserID"}},[r("el-input",{attrs:{disabled:0==e.editFormTtile.id,"auto-complete":"off"},model:{value:e.editForm.UserID,callback:function(t){e.$set(e.editForm,"UserID",t)},expression:"editForm.UserID"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"UserPwd"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.editForm.UserPwd,callback:function(t){e.$set(e.editForm,"UserPwd",t)},expression:"editForm.UserPwd"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"姓名",prop:"UserName"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.UserName,callback:function(t){e.$set(e.editForm,"UserName",t)},expression:"editForm.UserName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"身份证",prop:"UserCardID"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.UserCardID,callback:function(t){e.$set(e.editForm,"UserCardID",t)},expression:"editForm.UserCardID"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"UserEmail"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.UserEmail,callback:function(t){e.$set(e.editForm,"UserEmail",t)},expression:"editForm.UserEmail"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",prop:"UserSex"}},[r("el-radio-group",{model:{value:e.editForm.UserSex,callback:function(t){e.$set(e.editForm,"UserSex",t)},expression:"editForm.UserSex"}},[r("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("男")]),e._v(" "),r("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("女")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"年龄",prop:"UserAge"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.UserAge,callback:function(t){e.$set(e.editForm,"UserAge",t)},expression:"editForm.UserAge"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号",prop:"UserPhoneNum"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.editForm.UserPhoneNum,callback:function(t){e.$set(e.editForm,"UserPhoneNum",t)},expression:"editForm.UserPhoneNum"}},[r("template",{slot:"prepend"},[e._v("+86")])],2)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.editSubmit}},[e._v(e._s(e.btnEditText))])],1)],1)],2)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=8.074df7e070b137cfd3d3.js.map