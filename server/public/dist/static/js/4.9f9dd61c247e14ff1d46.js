webpackJsonp([4,10],{353:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(6),s=r(l),n=a(10),o=(r(n),a(9)),i=r(o),c=a(5),d=r(c),u=a(7);t.default={computed:(0,s.default)({},(0,u.mapGetters)(["getProj"])),data:function(){return{curRoleID:-1,isEdit:!1,isEditText:"查看模式",default_active:"0",role_data:[],tableUserData:[],formInline:{user:""},listLoading:!1,currentPage:0,tableDataLength:0,currentPageSize:0}},created:function(){this.getRoleData()},methods:{changeUserRole:function(e){var t=this,a={UserID:e._id,ProjID:t.getProj.ProjID,RoleID:t.curRoleID,insertOrDel:e.UserInRole?"insert":"del"};d.default.post("/api/InsertOrDelUserRole",a).then(function(a){a.data.success?t.$message({message:"["+e.UserName+"]设置成功",type:"success"}):console.log(a.data)}).catch(function(e){return console.log(e)})},handleselect:function(e){this.curRoleID=this.role_data[e].value,this.getUserData()},formatSex:function(e,t){return 1==e.UserSex?"男":0==e.UserSex?"女":"未知"},handleSizeChange:function(){},handleCurrentChange:function(){},changeEdit:function(){0==this.isEdit&&this.curCityID==-1?this.$message({message:"请先选择项目",type:"error"}):(this.isEdit=!this.isEdit,this.isEditText=this.isEdit?"编辑模式":"查看模式",this.getUserData())},getUserData:function(){var e=this,t="/api/GetUserByRoleID",a={limit:e.$data.currentPageSize,page:e.$data.currentPage,ProjID:e.getProj.ProjID,RoleID:e.curRoleID,isEdit:e.isEdit};e.listLoading=!0,i.default.start(),d.default.get(t,{params:a}).then(function(t){t.data.success?(e.$data.tableUserData=t.data.data,e.$data.tableDataLength=t.data.meta.count,e.listLoading=!1,i.default.done()):(e.$data.tableUserData=[],e.$data.tableDataLength=0,e.listLoading=!1,i.default.done())}).catch(function(e){return console.log(e)})},getRoleData:function(){var e=this;d.default.get("/api/GetRole?ProjID="+e.getProj.ProjID).then(function(t){t.data.success&&(e.role_data=t.data.data,e.role_data[0]&&(e.curRoleID=e.role_data[0].value,e.getUserData()))}).catch(function(e){return console.log(e)})}}}},416:function(e,t,a){t=e.exports=a(21)(),t.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",file:"UserRoleManager.vue",sourceRoot:"webpack://"}])},510:function(e,t,a){var r=a(416);"string"==typeof r&&(r=[[e.id,r,""]]);a(22)(r,{});r.locals&&(e.exports=r.locals)},534:function(e,t,a){a(510);var r=a(3)(a(353),a(568),"data-v-6ad5e4d3",null);e.exports=r.exports},568:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{staticStyle:{width:"100%"}},[a("el-tab-pane",{attrs:{label:"用户角色管理"}},[a("section",[a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"人员搜索"}},[a("el-input",{attrs:{placeholder:"工号/姓名"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{round:""}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",round:""},on:{click:e.changeEdit}},[e._v(e._s(e.isEditText))])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"0px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("角色列表")])]),e._v(" "),a("el-menu",{attrs:{"default-active":e.default_active},on:{select:e.handleselect}},e._l(e.role_data,function(t,r){return a("el-menu-item",{key:r,attrs:{index:r+""}},[e._v("\n                  "+e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%",height:"100%"},attrs:{border:"",fit:"",stripe:"",data:e.tableUserData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"编号",width:"85"}}),e._v(" "),a("el-table-column",{attrs:{prop:"UserID",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"UserName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"UserSex",label:"性别",formatter:e.formatSex}}),e._v(" "),a("el-table-column",{attrs:{prop:"UserAge",label:"年龄"}}),e._v(" "),a("el-table-column",{attrs:{prop:"UserPhoneNum",label:"手机号"}}),e._v(" "),e.isEdit?a("el-table-column",{attrs:{label:"成员",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{on:{change:function(a){e.changeUserRole(t.row)}},model:{value:t.row.UserInRole,callback:function(a){e.$set(t.row,"UserInRole",a)},expression:"scope.row.UserInRole"}})]}}])}):e._e()],1),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"10px"},attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.currentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableDataLength},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=4.9f9dd61c247e14ff1d46.js.map