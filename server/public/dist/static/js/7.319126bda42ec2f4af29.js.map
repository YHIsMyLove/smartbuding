{"version":3,"sources":["webpack:///static/js/7.319126bda42ec2f4af29.js","webpack:///UserDeptManager.vue","webpack:///./public/src/components/business/UserDeptManager.vue?2b02","webpack:///./public/src/components/business/UserDeptManager.vue?ea65","webpack:///./public/src/components/business/UserDeptManager.vue","webpack:///./public/src/components/business/UserDeptManager.vue?f7b7"],"names":["webpackJsonp","350","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_extends2","_extends3","_util","_nprogress","_nprogress2","_axios","_axios2","_vuex","data","defaultKey","formInline","user","isEditText","isEdit","expand","filterText","treeDeptData","defaultProps","children","label","tableUserData","listLoading","currentPage","tableDataLength","currentPageSize","curDeptID","created","this","getDeptsData","computed","mapGetters","methods","changeUserDept","row","that","query","UserID","_id","ProjID","getProj","DeptID","insertOrDel","UserInDept","post","then","res","success","$message","message","UserName","type","console","log","catch","err","changeEdit","getUserData","selectDeptTreeChange","node","ID","filterNode","indexOf","formatSex","column","UserSex","handleEdit","handleDel","handleSizeChange","handleCurrentChange","_this","start","get","length","done","url","params","limit","$data","page","meta","count","watch","val","$refs","deptTree","filter","414","push","id","version","sources","names","mappings","file","sourceRoot","505","content","locals","531","Component","562","render","_vm","_h","$createElement","_c","_self","staticStyle","width","attrs","staticClass","span","inline","model","round","on","click","_v","_s","placeholder","callback","$$v","expression","ref","accordion","default-expand-all","expand-on-click-node","highlight-current","props","filter-node-method","default-checked-keys","current-change","directives","name","rawName","height","border","fit","stripe","highlight-current-row","prop","formatter","scopedSlots","_u","key","fn","scope","change","$event","$set","_e","padding-bottom","float","current-page","page-sizes","page-size","layout","total","size-change","staticRenderFns"],"mappings":"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","file":"static/js/7.319126bda42ec2f4af29.js","sourcesContent":["webpackJsonp([7,10],{\n\n/***/ 350:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends2 = __webpack_require__(6);\n\t\n\tvar _extends3 = _interopRequireDefault(_extends2);\n\t\n\tvar _util = __webpack_require__(10);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _nprogress = __webpack_require__(9);\n\t\n\tvar _nprogress2 = _interopRequireDefault(_nprogress);\n\t\n\tvar _axios = __webpack_require__(5);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _vuex = __webpack_require__(7);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t  data: function data() {\n\t    return {\n\t      defaultKey: [0],\n\t      formInline: {\n\t        user: \"\"\n\t      },\n\t      isEditText: \"查看模式\",\n\t      isEdit: false,\n\t      expand: false,\n\t      filterText: \"\",\n\t      treeDeptData: [],\n\t      defaultProps: {\n\t        children: \"children\",\n\t        label: \"label\"\n\t      },\n\t      tableUserData: [],\n\t      listLoading: false,\n\t      currentPage: 0,\n\t      tableDataLength: 0,\n\t      currentPageSize: 0,\n\t      curDeptID: -1\n\t    };\n\t  },\n\t  created: function created() {\n\t    this.getDeptsData();\n\t  },\n\t\n\t  computed: (0, _extends3.default)({}, (0, _vuex.mapGetters)([\"getProj\"])),\n\t  methods: {\n\t    changeUserDept: function changeUserDept(row) {\n\t      var that = this;\n\t      var query = {\n\t        UserID: row._id,\n\t        ProjID: that.getProj.ProjID,\n\t        DeptID: that.curDeptID,\n\t        insertOrDel: row.UserInDept ? \"insert\" : \"del\"\n\t      };\n\t      _axios2.default.post(\"/api/InsertOrDelUserDept\", query).then(function (res) {\n\t        if (res.data.success) {\n\t          that.$message({\n\t            message: \"[\" + row.UserName + \"]\\u8BBE\\u7F6E\\u6210\\u529F\",\n\t            type: \"success\"\n\t          });\n\t        } else {\n\t          console.log(res.data);\n\t        }\n\t      }).catch(function (err) {\n\t        return console.log(err);\n\t      });\n\t    },\n\t    changeEdit: function changeEdit() {\n\t      this.isEdit = !this.isEdit;\n\t      this.isEditText = this.isEdit ? \"编辑模式\" : \"查看模式\";\n\t      this.getUserData();\n\t    },\n\t    selectDeptTreeChange: function selectDeptTreeChange(node) {\n\t      this.curDeptID = node.ID;\n\t      this.getUserData();\n\t    },\n\t    filterNode: function filterNode(value, data) {\n\t      if (!value) return true;\n\t      return data.label.indexOf(value) !== -1;\n\t    },\n\t\n\t    formatSex: function formatSex(row, column) {\n\t      return row.UserSex == 1 ? \"男\" : row.UserSex == 0 ? \"女\" : \"未知\";\n\t    },\n\t    handleEdit: function handleEdit(row) {},\n\t    handleDel: function handleDel(row) {},\n\t    handleSizeChange: function handleSizeChange() {},\n\t    handleCurrentChange: function handleCurrentChange() {},\n\t    getDeptsData: function getDeptsData() {\n\t      var _this = this;\n\t\n\t      var that = this;\n\t      if (!this.getProj) {\n\t        this.$message({\n\t          message: \"请先选择项目\",\n\t          type: \"error\"\n\t        });\n\t        return;\n\t      }\n\t      that.listLoading = true;\n\t      _nprogress2.default.start();\n\t      _axios2.default.get(\"/api/GetDeptTreeByProjID?ProjID=\" + that.getProj.ProjID).then(function (res) {\n\t        if (res.data.success) {\n\t          that.treeDeptData = res.data.data;\n\t          if (that.treeDeptData.length > 0) {\n\t            that.defaultKey = [that.treeDeptData[0].ID];\n\t          }\n\t          _this.getUserData();\n\t        } else {\n\t          _this.$message({\n\t            message: \"请先选择项目\",\n\t            type: \"error\"\n\t          });\n\t        }\n\t        that.listLoading = false;\n\t        _nprogress2.default.done();\n\t      }).catch(function (err) {\n\t        console.log(err);\n\t\n\t        that.listLoading = false;\n\t        _nprogress2.default.done();\n\t      });\n\t    },\n\t    getUserData: function getUserData() {\n\t      var that = this;\n\t      var url = \"/api/GetUserByDeptID\";\n\t      var params = {\n\t        limit: that.$data.currentPageSize,\n\t        page: that.$data.currentPage,\n\t        ProjID: that.getProj.ProjID,\n\t        DeptID: that.curDeptID,\n\t        isEdit: that.isEdit\n\t      };\n\t      that.listLoading = true;\n\t      _nprogress2.default.start();\n\t      _axios2.default.get(url, { params: params }).then(function (res) {\n\t        if (res.data.success) {\n\t          that.$data.tableUserData = res.data.data;\n\t          that.$data.tableDataLength = res.data.meta.count;\n\t          that.listLoading = false;\n\t          _nprogress2.default.done();\n\t        } else {\n\t          that.$data.tableUserData = [];\n\t          that.$data.tableDataLength = 0;\n\t          that.listLoading = false;\n\t          _nprogress2.default.done();\n\t        }\n\t      }).catch(function (err) {\n\t        return console.log(err);\n\t      });\n\t    }\n\t  },\n\t  watch: {\n\t    filterText: function filterText(val) {\n\t      this.$refs.deptTree.filter(val);\n\t    }\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 414:\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(21)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"UserDeptManager.vue\",\"sourceRoot\":\"webpack://\"}]);\n\t\n\t// exports\n\n\n/***/ }),\n\n/***/ 505:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(414);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(22)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?sourceMap!../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-48be00b8&scoped=true!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./UserDeptManager.vue\", function() {\n\t\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?sourceMap!../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-48be00b8&scoped=true!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./UserDeptManager.vue\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n\n/***/ 531:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t/* styles */\n\t__webpack_require__(505)\n\t\n\tvar Component = __webpack_require__(3)(\n\t  /* script */\n\t  __webpack_require__(350),\n\t  /* template */\n\t  __webpack_require__(562),\n\t  /* scopeId */\n\t  \"data-v-48be00b8\",\n\t  /* cssModules */\n\t  null\n\t)\n\t\n\tmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 562:\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', [_c('el-tabs', {\n\t    staticStyle: {\n\t      \"width\": \"100%\"\n\t    }\n\t  }, [_c('el-tab-pane', {\n\t    attrs: {\n\t      \"label\": \"用户部门管理\"\n\t    }\n\t  }, [_c('section', [_c('el-col', {\n\t    staticClass: \"toolbar\",\n\t    attrs: {\n\t      \"span\": 24\n\t    }\n\t  }, [_c('el-form', {\n\t    staticClass: \"demo-form-inline\",\n\t    attrs: {\n\t      \"inline\": true,\n\t      \"model\": _vm.formInline\n\t    }\n\t  }, [_c('el-form-item', [_c('el-button', {\n\t    attrs: {\n\t      \"type\": \"primary\",\n\t      \"round\": \"\"\n\t    },\n\t    on: {\n\t      \"click\": _vm.changeEdit\n\t    }\n\t  }, [_vm._v(_vm._s(_vm.isEditText))])], 1)], 1)], 1), _vm._v(\" \"), _c('el-col', {\n\t    attrs: {\n\t      \"span\": 8\n\t    }\n\t  }, [_c('el-input', {\n\t    attrs: {\n\t      \"placeholder\": \"输入关键字进行过滤\"\n\t    },\n\t    model: {\n\t      value: (_vm.filterText),\n\t      callback: function($$v) {\n\t        _vm.filterText = $$v\n\t      },\n\t      expression: \"filterText\"\n\t    }\n\t  }), _vm._v(\" \"), _c('el-tree', {\n\t    ref: \"deptTree\",\n\t    staticClass: \"filter-tree\",\n\t    attrs: {\n\t      \"accordion\": \"\",\n\t      \"default-expand-all\": \"\",\n\t      \"expand-on-click-node\": _vm.expand,\n\t      \"highlight-current\": \"\",\n\t      \"data\": _vm.treeDeptData,\n\t      \"props\": _vm.defaultProps,\n\t      \"filter-node-method\": _vm.filterNode,\n\t      \"default-checked-keys\": _vm.defaultKey\n\t    },\n\t    on: {\n\t      \"current-change\": _vm.selectDeptTreeChange\n\t    }\n\t  })], 1), _vm._v(\" \"), _c('el-col', {\n\t    attrs: {\n\t      \"span\": 16\n\t    }\n\t  }, [_c('el-table', {\n\t    directives: [{\n\t      name: \"loading\",\n\t      rawName: \"v-loading\",\n\t      value: (_vm.listLoading),\n\t      expression: \"listLoading\"\n\t    }],\n\t    staticStyle: {\n\t      \"width\": \"100%\",\n\t      \"height\": \"100%\"\n\t    },\n\t    attrs: {\n\t      \"border\": \"\",\n\t      \"fit\": \"\",\n\t      \"stripe\": \"\",\n\t      \"data\": _vm.tableUserData,\n\t      \"highlight-current-row\": \"\"\n\t    }\n\t  }, [_c('el-table-column', {\n\t    attrs: {\n\t      \"type\": \"index\",\n\t      \"label\": \"编号\",\n\t      \"width\": \"85\"\n\t    }\n\t  }), _vm._v(\" \"), _c('el-table-column', {\n\t    attrs: {\n\t      \"prop\": \"UserID\",\n\t      \"label\": \"账号\"\n\t    }\n\t  }), _vm._v(\" \"), _c('el-table-column', {\n\t    attrs: {\n\t      \"prop\": \"UserName\",\n\t      \"label\": \"姓名\"\n\t    }\n\t  }), _vm._v(\" \"), _c('el-table-column', {\n\t    attrs: {\n\t      \"prop\": \"UserSex\",\n\t      \"label\": \"性别\",\n\t      \"formatter\": _vm.formatSex\n\t    }\n\t  }), _vm._v(\" \"), _c('el-table-column', {\n\t    attrs: {\n\t      \"prop\": \"UserAge\",\n\t      \"label\": \"年龄\"\n\t    }\n\t  }), _vm._v(\" \"), _c('el-table-column', {\n\t    attrs: {\n\t      \"prop\": \"UserPhoneNum\",\n\t      \"label\": \"手机号\"\n\t    }\n\t  }), _vm._v(\" \"), (_vm.isEdit) ? _c('el-table-column', {\n\t    attrs: {\n\t      \"label\": \"成员\",\n\t      \"width\": \"100\"\n\t    },\n\t    scopedSlots: _vm._u([{\n\t      key: \"default\",\n\t      fn: function(scope) {\n\t        return [_c('el-switch', {\n\t          on: {\n\t            \"change\": function($event) {\n\t              _vm.changeUserDept(scope.row)\n\t            }\n\t          },\n\t          model: {\n\t            value: (scope.row.UserInDept),\n\t            callback: function($$v) {\n\t              _vm.$set(scope.row, \"UserInDept\", $$v)\n\t            },\n\t            expression: \"scope.row.UserInDept\"\n\t          }\n\t        })]\n\t      }\n\t    }])\n\t  }) : _vm._e()], 1), _vm._v(\" \"), _c('el-col', {\n\t    staticClass: \"toolbar\",\n\t    staticStyle: {\n\t      \"padding-bottom\": \"10px\"\n\t    },\n\t    attrs: {\n\t      \"span\": 24\n\t    }\n\t  }, [_c('el-pagination', {\n\t    staticStyle: {\n\t      \"float\": \"right\"\n\t    },\n\t    attrs: {\n\t      \"current-page\": _vm.currentPage,\n\t      \"page-sizes\": [10, 20, 30, 40],\n\t      \"page-size\": _vm.currentPageSize,\n\t      \"layout\": \"total, sizes, prev, pager, next, jumper\",\n\t      \"total\": _vm.tableDataLength\n\t    },\n\t    on: {\n\t      \"size-change\": _vm.handleSizeChange,\n\t      \"current-change\": _vm.handleCurrentChange\n\t    }\n\t  })], 1)], 1)], 1)])], 1)], 1)\n\t},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/7.319126bda42ec2f4af29.js","<template>\n  <div>\n    <el-tabs style=\"width:100%;\">\n      <el-tab-pane label=\"用户部门管理\">\n        <section>\n          <el-col :span=\"24\" class=\"toolbar\">\n            <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\">\n              <el-form-item>\n                <el-button @click=\"changeEdit\" type=\"primary\" round>{{isEditText}}</el-button>\n              </el-form-item>\n            </el-form>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-input placeholder=\"输入关键字进行过滤\" v-model=\"filterText\">\n            </el-input>\n            <el-tree \n              accordion default-expand-all \n              :expand-on-click-node=\"expand\" \n              highlight-current \n              @current-change=\"selectDeptTreeChange\"\n              class=\"filter-tree\" \n              :data=\"treeDeptData\" \n              :props=\"defaultProps\" \n              :filter-node-method=\"filterNode\"\n              :default-checked-keys=\"defaultKey\" \n              ref=\"deptTree\">\n            </el-tree>\n          </el-col>\n          <el-col :span=\"16\">\n            <el-table border fit stripe :data=\"tableUserData\" highlight-current-row v-loading=\"listLoading\" style=\"width: 100%; height:100%\">\n              <el-table-column type=\"index\" label=\"编号\" width=\"85\">\n              </el-table-column>\n              <el-table-column prop=\"UserID\" label=\"账号\">\n              </el-table-column>\n              <el-table-column prop=\"UserName\" label=\"姓名\">\n              </el-table-column>\n              <el-table-column prop=\"UserSex\" label=\"性别\" :formatter=\"formatSex\">\n              </el-table-column>\n              <el-table-column prop=\"UserAge\" label=\"年龄\">\n              </el-table-column>\n              <el-table-column prop=\"UserPhoneNum\" label=\"手机号\">\n              </el-table-column>\n              <el-table-column v-if=\"isEdit\" label=\"成员\" width=\"100\">\n                <template scope=\"scope\">\n                  <el-switch v-model=\"scope.row.UserInDept\" @change=\"changeUserDept(scope.row)\"></el-switch>\n                </template>\n              </el-table-column>\n            </el-table>\n            <el-col :span=\"24\" class=\"toolbar\" style=\"padding-bottom:10px;\">\n              <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"[10, 20, 30, 40]\"\n                :page-size=\"currentPageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"tableDataLength\" style=\"float:right\">\n              </el-pagination>\n            </el-col>\n          </el-col>\n        </section>\n      </el-tab-pane>\n    </el-tabs>\n  </div>\n\n</template>\n<script>\nimport util from \"../../common/util\";\nimport NProgress from \"nprogress\";\nimport axios from \"axios\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  data() {\n    return {\n      defaultKey: [0],\n      formInline: {\n        user: \"\"\n      },\n      isEditText: \"查看模式\",\n      isEdit: false,\n      expand: false,\n      filterText: \"\",\n      treeDeptData: [],\n      defaultProps: {\n        children: \"children\",\n        label: \"label\"\n      },\n      tableUserData: [],\n      listLoading: false,\n      currentPage: 0,\n      tableDataLength: 0,\n      currentPageSize: 0,\n      curDeptID: -1\n    };\n  },\n  created() {\n    this.getDeptsData();\n  },\n  computed: {\n    ...mapGetters([\"getProj\"])\n  },\n  methods: {\n    //设置用户部门\n    changeUserDept(row) {\n      let that = this;\n      let query = {\n        UserID: row._id,\n        ProjID: that.getProj.ProjID,\n        DeptID: that.curDeptID,\n        insertOrDel: row.UserInDept ? \"insert\" : \"del\"\n      };\n      axios\n        .post(\"/api/InsertOrDelUserDept\", query)\n        .then(res => {\n          if (res.data.success) {\n            that.$message({\n              message: `[${row.UserName}]设置成功`,\n              type: \"success\"\n            });\n          } else {\n            console.log(res.data);\n          }\n        })\n        .catch(err => console.log(err));\n    },\n    //切换编辑/查看模式\n    changeEdit() {\n      this.isEdit = !this.isEdit;\n      this.isEditText = this.isEdit ? \"编辑模式\" : \"查看模式\";\n      this.getUserData();\n    },\n    //树节点切换事件\n    selectDeptTreeChange(node) {\n      this.curDeptID = node.ID;\n      this.getUserData();\n    },\n    //过滤树节点\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.label.indexOf(value) !== -1;\n    },\n    //性别显示转换\n    formatSex: function(row, column) {\n      return row.UserSex == 1 ? \"男\" : row.UserSex == 0 ? \"女\" : \"未知\";\n    },\n    handleEdit(row) {},\n    handleDel(row) {},\n    handleSizeChange() {},\n    handleCurrentChange() {},\n    //获取部门数据\n    getDeptsData() {\n      let that = this;\n      if (!this.getProj) {\n        this.$message({\n          message: \"请先选择项目\",\n          type: \"error\"\n        });\n        return;\n      }\n      that.listLoading = true;\n      NProgress.start();\n      axios\n        .get(`/api/GetDeptTreeByProjID?ProjID=${that.getProj.ProjID}`)\n        .then(res => {\n          if (res.data.success) {\n            that.treeDeptData = res.data.data;\n            if (that.treeDeptData.length > 0) {\n              that.defaultKey = [that.treeDeptData[0].ID];\n            }\n            this.getUserData();\n          } else {\n            this.$message({\n              message: \"请先选择项目\",\n              type: \"error\"\n            });\n          }\n          that.listLoading = false;\n          NProgress.done();\n        })\n        .catch(err => {\n          console.log(err);\n\n          that.listLoading = false;\n          NProgress.done();\n        });\n    },\n    //获取人员资料\n    getUserData() {\n      let that = this;\n      let url = `/api/GetUserByDeptID`;\n      let params = {\n        limit: that.$data.currentPageSize,\n        page: that.$data.currentPage,\n        ProjID: that.getProj.ProjID,\n        DeptID: that.curDeptID,\n        isEdit: that.isEdit\n      };\n      that.listLoading = true;\n      NProgress.start();\n      axios\n        .get(url, { params: params })\n        .then(res => {\n          if (res.data.success) {\n            that.$data.tableUserData = res.data.data;\n            that.$data.tableDataLength = res.data.meta.count;\n            that.listLoading = false;\n            NProgress.done();\n          } else {\n            that.$data.tableUserData = [];\n            that.$data.tableDataLength = 0;\n            that.listLoading = false;\n            NProgress.done();\n          }\n        })\n        .catch(err => console.log(err));\n    }\n  },\n  watch: {\n    filterText(val) {\n      this.$refs.deptTree.filter(val);\n    }\n  }\n};\n</script>\n<style scoped>\n</style>\n\n\n// WEBPACK FOOTER //\n// UserDeptManager.vue?068df652","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"UserDeptManager.vue\",\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-48be00b8&scoped=true!./~/vue-loader/lib/selector.js?type=styles&index=0!./public/src/components/business/UserDeptManager.vue\n// module id = 414\n// module chunks = 7","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?sourceMap!../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-48be00b8&scoped=true!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./UserDeptManager.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?sourceMap!../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-48be00b8&scoped=true!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./UserDeptManager.vue\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?sourceMap!../../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-48be00b8&scoped=true!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./UserDeptManager.vue\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!./~/vue-style-loader!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-48be00b8&scoped=true!./~/vue-loader/lib/selector.js?type=styles&index=0!./public/src/components/business/UserDeptManager.vue\n// module id = 505\n// module chunks = 7","\n/* styles */\nrequire(\"!!../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../../../node_modules/vue-loader/lib/style-rewriter?id=data-v-48be00b8&scoped=true!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UserDeptManager.vue\")\n\nvar Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserDeptManager.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler?id=data-v-48be00b8!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./UserDeptManager.vue\"),\n  /* scopeId */\n  \"data-v-48be00b8\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/src/components/business/UserDeptManager.vue\n// module id = 531\n// module chunks = 7","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('el-tabs', {\n    staticStyle: {\n      \"width\": \"100%\"\n    }\n  }, [_c('el-tab-pane', {\n    attrs: {\n      \"label\": \"用户部门管理\"\n    }\n  }, [_c('section', [_c('el-col', {\n    staticClass: \"toolbar\",\n    attrs: {\n      \"span\": 24\n    }\n  }, [_c('el-form', {\n    staticClass: \"demo-form-inline\",\n    attrs: {\n      \"inline\": true,\n      \"model\": _vm.formInline\n    }\n  }, [_c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"round\": \"\"\n    },\n    on: {\n      \"click\": _vm.changeEdit\n    }\n  }, [_vm._v(_vm._s(_vm.isEditText))])], 1)], 1)], 1), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 8\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"输入关键字进行过滤\"\n    },\n    model: {\n      value: (_vm.filterText),\n      callback: function($$v) {\n        _vm.filterText = $$v\n      },\n      expression: \"filterText\"\n    }\n  }), _vm._v(\" \"), _c('el-tree', {\n    ref: \"deptTree\",\n    staticClass: \"filter-tree\",\n    attrs: {\n      \"accordion\": \"\",\n      \"default-expand-all\": \"\",\n      \"expand-on-click-node\": _vm.expand,\n      \"highlight-current\": \"\",\n      \"data\": _vm.treeDeptData,\n      \"props\": _vm.defaultProps,\n      \"filter-node-method\": _vm.filterNode,\n      \"default-checked-keys\": _vm.defaultKey\n    },\n    on: {\n      \"current-change\": _vm.selectDeptTreeChange\n    }\n  })], 1), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 16\n    }\n  }, [_c('el-table', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading\",\n      value: (_vm.listLoading),\n      expression: \"listLoading\"\n    }],\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    },\n    attrs: {\n      \"border\": \"\",\n      \"fit\": \"\",\n      \"stripe\": \"\",\n      \"data\": _vm.tableUserData,\n      \"highlight-current-row\": \"\"\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"type\": \"index\",\n      \"label\": \"编号\",\n      \"width\": \"85\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"UserID\",\n      \"label\": \"账号\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"UserName\",\n      \"label\": \"姓名\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"UserSex\",\n      \"label\": \"性别\",\n      \"formatter\": _vm.formatSex\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"UserAge\",\n      \"label\": \"年龄\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"UserPhoneNum\",\n      \"label\": \"手机号\"\n    }\n  }), _vm._v(\" \"), (_vm.isEdit) ? _c('el-table-column', {\n    attrs: {\n      \"label\": \"成员\",\n      \"width\": \"100\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('el-switch', {\n          on: {\n            \"change\": function($event) {\n              _vm.changeUserDept(scope.row)\n            }\n          },\n          model: {\n            value: (scope.row.UserInDept),\n            callback: function($$v) {\n              _vm.$set(scope.row, \"UserInDept\", $$v)\n            },\n            expression: \"scope.row.UserInDept\"\n          }\n        })]\n      }\n    }])\n  }) : _vm._e()], 1), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"toolbar\",\n    staticStyle: {\n      \"padding-bottom\": \"10px\"\n    },\n    attrs: {\n      \"span\": 24\n    }\n  }, [_c('el-pagination', {\n    staticStyle: {\n      \"float\": \"right\"\n    },\n    attrs: {\n      \"current-page\": _vm.currentPage,\n      \"page-sizes\": [10, 20, 30, 40],\n      \"page-size\": _vm.currentPageSize,\n      \"layout\": \"total, sizes, prev, pager, next, jumper\",\n      \"total\": _vm.tableDataLength\n    },\n    on: {\n      \"size-change\": _vm.handleSizeChange,\n      \"current-change\": _vm.handleCurrentChange\n    }\n  })], 1)], 1)], 1)])], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-48be00b8!./~/vue-loader/lib/selector.js?type=template&index=0!./public/src/components/business/UserDeptManager.vue\n// module id = 562\n// module chunks = 7"],"sourceRoot":""}