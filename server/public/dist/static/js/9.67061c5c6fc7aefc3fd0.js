webpackJsonp([9,10],{345:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(64),o=i(r),l=a(6),n=i(l),s=a(10),d=(i(s),a(9)),m=i(d),u=a(5),c=i(u),v=a(1),p=(i(v),a(7));t.default={computed:(0,n.default)({},(0,p.mapGetters)(["getUser"])),data:function(){return{formInline:{user:""},editFormVisible:!1,editFormTtile:"编辑",editForm:{id:0,DevID:0,DevName:"",DevType:"",DevVersion:"",DevSystemName:""},editLoading:!1,btnEditText:"提 交",editFormRules:{UserPwd:[{required:!0,message:"请输入密码",trigger:"blur"}],UserName:[{required:!0,message:"请输入姓名",trigger:"blur"}],UserPhoneNum:[{required:!0,message:"请输入手机号",trigger:"blur"}]},tableData:[],tableDataLength:0,listLoading:!1,currentPage:1,currentPageSize:10}},created:function(){this.getYSCameraList()},methods:{changeDev:function(e){console.log((0,o.default)(e))},handleEdit:function(e){this.editFormVisible=!0,this.editFormTtile="编辑",this.editForm.id=e._id,this.editForm.DevID=e.DevID,this.editForm.DevName=e.DevName,this.editForm.DevSystemName=e.DevName,this.editForm.DevType=e.DevType,this.editForm.DevVersion=e.DevVersion},editSubmit:function(){var e=this;e.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0,m.default.start(),e.btnEditText="提交中";var t=e.editForm.id?"/api/user/"+e.editForm.id:"/api/user";c.default.post(t,e.editForm).then(function(t){t.data.success?(e.$message({message:"提交成功",type:"success"}),e.editFormVisible=!1,e.getYSCameraList()):e.$message({message:"提交失败",type:"error"}),e.btnEditText="提 交",e.editLoading=!1,m.default.done()})})})},formatOnLine:function(e,t){return 1==e.DevStatus?"在线":0==e.DevStatus?"不在线":"未知"},getYSCameraList:function(){var e=this;e.listLoading=!0,m.default.start();var t={limit:e.$data.currentPageSize,page:e.$data.currentPage,token:e.getUser.YSToken};c.default.get("/api/GetYSDevs",{params:t}).then(function(t){e.$data.tableData=t.data.data,e.$data.tableDataLength=t.data.meta.count,e.listLoading=!1,m.default.done()})},handleSizeChange:function(e){this.$data.currentPageSize=e,this.getYSCameraList()},handleCurrentChange:function(e){this.$data.currentPage=e,this.getYSCameraList()}}}},526:function(e,t,a){var i=a(3)(a(345),a(567),null,null);e.exports=i.exports},567:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticStyle:{width:"100%"}},[a("el-tab-pane",{attrs:{label:"门禁设备管理"}},[a("section",[a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"设备名称"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.getYSCameraList}},[e._v("查询")])],1)],1)],1),e._v(" "),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%",height:"100%"},attrs:{border:"",fit:"",stripe:"",data:e.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"编号",width:"85"}}),e._v(" "),a("el-table-column",{attrs:{prop:"DevID",label:"设备ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"DevName",label:"设备名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"DevStatus",label:"在线状态",formatter:e.formatOnLine}}),e._v(" "),a("el-table-column",{attrs:{prop:"DevType",label:"设备类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"DevVersion",label:"设备版本"}}),e._v(" "),a("el-table-column",{attrs:{width:"120",label:"系统设备库"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{on:{change:function(a){e.changeDev(t.row)}},model:{value:t.row.InSytemDevs,callback:function(a){e.$set(t.row,"InSytemDevs",a)},expression:"scope.row.InSytemDevs"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")])]}}])})],1)],e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"10px"},attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.currentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableDataLength},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.editFormTtile,"close-on-click-modal":!0},model:{value:e.editFormVisible,callback:function(t){e.editFormVisible=t},expression:"editFormVisible"}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"100px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"设备ID",prop:"DevID"}},[a("el-input",{attrs:{disabled:!0,"auto-complete":"off"},model:{value:e.editForm.DevID,callback:function(t){e.$set(e.editForm,"DevID",t)},expression:"editForm.DevID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备名称",prop:"DevName"}},[a("el-input",{attrs:{disabled:!0,"auto-complete":"off"},model:{value:e.editForm.DevName,callback:function(t){e.$set(e.editForm,"DevName",t)},expression:"editForm.DevName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备类型",prop:"DevType"}},[a("el-input",{attrs:{disabled:!0,"auto-complete":"off"},model:{value:e.editForm.DevType,callback:function(t){e.$set(e.editForm,"DevType",t)},expression:"editForm.DevType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备版本",prop:"DevVersion"}},[a("el-input",{attrs:{disabled:!0,"auto-complete":"off"},model:{value:e.editForm.DevVersion,callback:function(t){e.$set(e.editForm,"DevVersion",t)},expression:"editForm.DevVersion"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统设备名称",prop:"DevName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.DevSystemName,callback:function(t){e.$set(e.editForm,"DevSystemName",t)},expression:"editForm.DevSystemName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.editSubmit}},[e._v(e._s(e.btnEditText))])],1)],1)],2)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=9.67061c5c6fc7aefc3fd0.js.map